"use strict";(self.webpackChunkPetsPaw=self.webpackChunkPetsPaw||[]).push([[882],{1882:(T,c,a)=>{a.r(c),a.d(c,{VotingModule:()=>D});var r=a(6895),d=a(4065),l=a(8136),p=a(3900),t=a(8256),u=a(2160),h=a(5296),m=a(8054),_=a(6134),f=a(3685),v=a(7192);function x(n,s){if(1&n&&(t.ynx(0),t._UZ(1,"app-cat-breed",17),t.BQk()),2&n){const e=s.$implicit;t.xp6(1),t.Q6J("url",e.url)}}function b(n,s){1&n&&(t.ynx(0),t._UZ(1,"img",18),t.BQk())}function F(n,s){1&n&&t._UZ(0,"img",19)}function C(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",8),t.YNc(1,x,2,1,"ng-container",7),t.TgZ(2,"ul",9)(3,"li",10),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onVoteBtnClicked(1))}),t._UZ(4,"img",11),t.qZA(),t.TgZ(5,"li",12),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.isBtnReady&&o.onFavBtnClicked())}),t.YNc(6,b,2,0,"ng-container",13),t.YNc(7,F,1,0,"ng-template",null,14,t.W1O),t.qZA(),t.TgZ(9,"li",15),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onVoteBtnClicked(0))}),t._UZ(10,"img",16),t.qZA()()()}if(2&n){const e=t.MAs(8),i=t.oxw();t.xp6(1),t.Q6J("ngForOf",i.loadedData),t.xp6(5),t.Q6J("ngIf",i.isFavourite)("ngIfElse",e)}}function k(n,s){1&n&&(t.TgZ(0,"div",20),t._UZ(1,"app-progress-spinner"),t.qZA())}function M(n,s){if(1&n&&(t.ynx(0),t.TgZ(1,"div",21)(2,"div",22)(3,"p",23),t._uU(4),t.qZA()(),t.TgZ(5,"p",24),t._uU(6,"Image ID: "),t.TgZ(7,"b",25),t._uU(8),t.qZA(),t._uU(9),t.qZA()(),t.BQk()),2&n){const e=s.$implicit;t.xp6(4),t.Oqu(e.currentTime),t.xp6(4),t.Oqu(e.imageID),t.xp6(1),t.AsE(" was ",e.action," ",e.place,"")}}const I=[{path:"",component:(()=>{class n{constructor(e,i){this.service=e,this.persister=i,this.loadedData=[],this.imageID="",this.subID="",this.favouriteID="",this.logs=[],this.isBtnReady=!0,this.createSubID(),this.searchImage()}ngOnInit(){}createSubID(){this.persister.set("sub_id","id369432"),this.subID=this.persister.get("sub_id")}searchImage(){this.service.searchVotingImage().pipe((0,p.w)(e=>(this.loadedData=e,this.imageID=this.loadedData[0].id,this.getFavouriteData()))).subscribe(e=>{this.checkIfFavourite(e)})}getFavouriteData(){return this.service.getFavourites(this.subID)}checkIfFavourite(e){let i=e.map(o=>o.image_id);this.isFavourite=i.includes(this.imageID)}deleteFavourite(){return this.service.delFavourite(this.favouriteID)}postFavourite(){return this.service.postFavourite(this.imageID,this.subID)}onFavBtnClicked(){let e;this.isBtnReady=!1,this.getFavouriteData().pipe((0,p.w)(i=>(this.checkIfFavourite(i),this.isFavourite?(e="DELETE",this.deleteFavourite()):(e="POST",this.postFavourite())))).subscribe(i=>{"SUCCESS"==i.message&&("DELETE"===e?(this.isFavourite=!1,this.loggedAction("removed from","Favourites")):(this.isFavourite=!0,this.favouriteID=i.id,this.loggedAction("added to","Favourites")),this.isBtnReady=!0)},i=>{console.error(i),this.isBtnReady=!0})}onVoteBtnClicked(e){this.service.postVote(this.imageID,this.subID,e).subscribe(i=>{"SUCCESS"===i.message&&(this.loggedAction("added to",1===e?"Likes":"Dislikes"),this.loadedData=[],this.searchImage())})}loggedAction(e,i){let o={imageID:"",action:"",place:"",currentTime:""},g=new Date,P=`${g.getHours()} : ${(g.getMinutes()<10?"0":"")+g.getMinutes()}`;o.imageID=this.imageID,o.action=e,o.place=i,o.currentTime=P,console.log(`New Action: ${e} ${i}`),this.logs.push(o)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u.s),t.Y36(h.C))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-voting"]],decls:12,vars:3,consts:[[1,"vote_sect"],[1,"tabs_bar"],[1,"page_name_cont"],[1,"page_name"],["class","vote_img_cont",4,"ngIf","ngIfElse"],["downloader",""],[1,"logs"],[4,"ngFor","ngForOf"],[1,"vote_img_cont"],[1,"voting_btns"],[1,"like_cont",3,"click"],["src","./assets/icons/like-30.svg","alt","likes_image",1,"like_btn"],[1,"fav_cont",3,"click"],[4,"ngIf","ngIfElse"],["defaultImg",""],[1,"dislike_cont",3,"click"],["src","./assets/icons/dislike-30.svg","alt","dislikes_image",1,"dislike_btn"],[3,"url"],["src","./assets/icons/fav-filled-white-30.svg","alt","favourites_image",1,"fav_btn_active"],["src","./assets/icons/fav-30.svg","alt","favourites_image",1,"fav_btn"],[1,"progress_spinner_cont"],[1,"new_log"],[1,"time_cont"],[1,"time"],[1,"log_msg"],[2,"color","#1D1D1D"]],template:function(e,i){if(1&e&&(t._UZ(0,"app-topbar"),t.TgZ(1,"section",0)(2,"div",1),t._UZ(3,"app-back-nav-btn"),t.TgZ(4,"div",2)(5,"p",3),t._uU(6,"VOTING"),t.qZA()()(),t.YNc(7,C,11,3,"div",4),t.YNc(8,k,2,0,"ng-template",null,5,t.W1O),t.TgZ(10,"div",6),t.YNc(11,M,10,4,"ng-container",7),t.qZA()()),2&e){const o=t.MAs(9);t.xp6(7),t.Q6J("ngIf",i.loadedData.length>0)("ngIfElse",o),t.xp6(4),t.Q6J("ngForOf",i.logs.reverse())}},dependencies:[r.sg,r.O5,m.o,_.I,f.H,v.O],styles:[".vote_sect[_ngcontent-%COMP%]{height:100%;margin-top:10px;background:#FFFFFF;border-radius:20px;padding:20px}.tabs_bar[_ngcontent-%COMP%]{display:flex}.page_name_cont[_ngcontent-%COMP%]{width:156px;height:40px;background:#FF868E;border-radius:10px;margin-left:10px}.page_name[_ngcontent-%COMP%]{font-family:Jost;font-style:normal;font-weight:500;font-size:20px;line-height:30px;text-align:center;letter-spacing:2px;color:#fff;margin:5px 30px}.vote_img_cont[_ngcontent-%COMP%]{margin-top:20px;border-radius:20px;width:100%;height:460px;position:relative}.voting_btns[_ngcontent-%COMP%]{width:248px;height:80px;background:#FFFFFF;border:4px solid #FFFFFF;border-radius:20px;position:absolute;left:50%;transform:translate(-50%);bottom:-40px;z-index:1;display:flex;box-sizing:content-box}.like_cont[_ngcontent-%COMP%]{width:80px;height:80px;background-color:#97eab9;border-top-left-radius:20px;border-bottom-left-radius:20px}.like_cont[_ngcontent-%COMP%]:hover{background:rgba(151,234,185,.3)}.like_cont[_ngcontent-%COMP%]:hover   .like_btn[_ngcontent-%COMP%]{filter:brightness(0) saturate(100%) invert(83%) sepia(34%) saturate(360%) hue-rotate(88deg) brightness(99%) contrast(88%)}.like_btn[_ngcontent-%COMP%]{margin:25px;filter:brightness(0) saturate(100%) invert(100%) sepia(0%) saturate(1693%) hue-rotate(205deg) brightness(123%) contrast(109%)}.fav_cont[_ngcontent-%COMP%]{width:80px;height:80px;background-color:#ff868e;margin-left:4px}.fav_cont[_ngcontent-%COMP%]:hover{background:rgba(255,134,142,.3)}.fav_cont[_ngcontent-%COMP%]:hover   .fav_btn[_ngcontent-%COMP%]{filter:brightness(0) saturate(100%) invert(63%) sepia(52%) saturate(1413%) hue-rotate(308deg) brightness(109%) contrast(99%)}.fav_btn[_ngcontent-%COMP%]{margin:27px 25px;filter:brightness(0) saturate(100%) invert(100%) sepia(0%) saturate(1693%) hue-rotate(205deg) brightness(123%) contrast(109%)}.fav_btn_active[_ngcontent-%COMP%]{width:30px;height:30px;margin:27px 25px}.dislike_cont[_ngcontent-%COMP%]{width:80px;height:80px;background-color:#ffd280;margin-left:4px;border-top-right-radius:20px;border-bottom-right-radius:20px}.dislike_cont[_ngcontent-%COMP%]:hover{background:rgba(255,210,128,.3)}.dislike_cont[_ngcontent-%COMP%]:hover   .dislike_btn[_ngcontent-%COMP%]{filter:brightness(0) saturate(100%) invert(82%) sepia(32%) saturate(687%) hue-rotate(336deg) brightness(104%) contrast(101%)}.dislike_btn[_ngcontent-%COMP%]{margin:25px;filter:brightness(0) saturate(100%) invert(100%) sepia(0%) saturate(1693%) hue-rotate(205deg) brightness(123%) contrast(109%)}.logs[_ngcontent-%COMP%]{margin-top:50px;width:100%;height:auto}.new_log[_ngcontent-%COMP%]{width:100%;height:60px;background:#F8F8F7;border-radius:10px;display:flex;margin-bottom:10px}.time_cont[_ngcontent-%COMP%]{width:max-content;height:30px;background:#FFFFFF;border-radius:5px;margin-top:15px;margin-bottom:15px;margin-left:15px}.time[_ngcontent-%COMP%]{width:max-content;color:#1d1d1d;font-family:Jost;font-style:normal;font-weight:400;font-size:16px;line-height:24px;text-align:center;margin:3px 10px}.log_msg[_ngcontent-%COMP%]{margin-left:30px;margin-top:18px;margin-bottom:18px;width:max-content;height:24px;font-family:Jost;font-style:normal;font-weight:400;font-size:16px;line-height:24px;color:#8c8c8c}.progress_spinner_cont[_ngcontent-%COMP%]{padding-top:20%;padding-left:45%}"]}),n})()}];let O=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[l.Bz.forChild(I),l.Bz]}),n})(),D=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[r.ez,O,d.m]}),n})()}}]);